(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{213:function(s,a,t){"use strict";t.r(a);var e=t(28),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"query-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#query-files"}},[s._v("#")]),s._v(" Query Files")]),s._v(" "),t("p",[s._v("Query files contain SQL queries to run at certain lifecycle events.")]),s._v(" "),t("h2",{attrs:{id:"files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#files"}},[s._v("#")]),s._v(" Files")]),s._v(" "),t("h3",{attrs:{id:"before-tests-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#before-tests-sql"}},[s._v("#")]),s._v(" before_tests.sql")]),s._v(" "),t("p",[s._v("Will be executed before any tests are run. This is a good spot to create a database snapshot or prepare a database.")]),s._v(" "),t("h4",{attrs:{id:"example-1-creating-a-database-snapshot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-1-creating-a-database-snapshot"}},[s._v("#")]),s._v(" Example 1: Creating a database snapshot")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.microsoft.com/en-us/sql/relational-databases/databases/revert-a-database-to-a-database-snapshot?view=sql-server-ver15",target:"_blank",rel:"noopener noreferrer"}},[s._v("Reference"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" mydb_snapshot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" mydb_snapshot \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    NAME "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mydb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    FILENAME "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'C:\\\\mydb_snapshot.ss'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SNAPSHOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OF")]),s._v(" mydb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"after-tests-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#after-tests-sql"}},[s._v("#")]),s._v(" after_tests.sql")]),s._v(" "),t("p",[s._v("Will be executed after all tests have finished. This is a good spot to rollback a database.")]),s._v(" "),t("h4",{attrs:{id:"example-1-restoring-from-a-database-snapshot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-1-restoring-from-a-database-snapshot"}},[s._v("#")]),s._v(" Example 1: Restoring from a database snapshot")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.microsoft.com/en-us/sql/relational-databases/databases/revert-a-database-to-a-database-snapshot?view=sql-server-ver15",target:"_blank",rel:"noopener noreferrer"}},[s._v("Reference"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" mydb "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" SINGLE_USER "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROLLBACK")]),s._v(" IMMEDIATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RESTORE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" mydb "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" DATABASE_SNAPSHOT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mydb_snapshot'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" mydb_snapshot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);